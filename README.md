# Шпаргалка по Git

## Создать репозиторий

git init

## «Разгитить» папку, если что-то пошло не так

rm -rf .git

## Проверить состояние репозитория

git status

## Подготовить файлы к сохранению

git add
git add --all # подготовили к сохранению все файлы в репозитории
git add . # добавить всю текущую папку

## Выполнить коммит

git commit -m 'Комментарий'

## Просмотреть историю коммитов

git log

## Привязать удалённый репозиторий к локальному

git remote add

Команде необходимо передать два параметра: имя удалённого репозитория и его URL.

Например: git remote add origin git@github.com:%ИМЯ_АККАУНТА%/first-project.git

## Убедиться, что репозитории связаны

git remote -v

## Отправить изменения на удалённый репозиторий

git push

## Хеш — идентификатор коммита

Хеширование — это способ преобразовать набор данных и получить их «отпечаток».
Набор данных: когда был сделан коммит, содержимое файлов в репозитории на момент коммита и ссылка на предыдущий (родительский), коммит.

## Исследуем лог

После вызова git log появляется список коммитов с их описанием.

1. Строка из цифр и латинских букв после слова commit — это уже знакомый вам хеш коммита.
2. Author — имя автора и его электронная почта.
3. Date — дата и время создания коммита.
4. Сообщение к коммиту.

Сокращённый лог вызывают командой git log с флагом --oneline.

## HEAD — всему голова

Файл HEAD указывает на коммит, который сделан последним (то есть на самый новый).

## Статусы

1. untracked - неотслеживаемый

Новые файлы в Git-репозитории. Git «видит», что такой файл существует, но не следит за изменениями в нём.

2. staged - подготовленный

Файлы после выполнения команды git add

3. tracked - отслеживаемый

Файлы, которые уже были зафиксированы с помощью git commit, а также файлы, которые были добавлены в staging area командой git add. То есть все файлы, в которых Git так или иначе отслеживает изменения.

4. modified - изменённый

Состояние modified значит, что Git сравнил содержимое файла с последней сохранённой версией и нашёл отличия.

## Совместимость статусов

untracked не совместим с другими статусами

tracked соместим со всеми остальными статусами - tracked файл может одновременно быть и staged, и modified

untracked+git add = tracked, staged

staged+изменения = staged, modified 

(но если закоммитить такой файл, то в коммит будет соханена версия ДО вненесия изменений. Та, к которой был применен git add)

modified+git add = staged

staged+commit = tracked

## Дополнить коммит новыми файлами

git commit --amend --no-edit (сообщение коммита нужно оставить как было)

## Изменить сообщение коммита

git commit --amend -m "Новое сообщение"

## Выполнить unstage изменений

git restore --staged <file>

## «Откатить» коммит

git reset --hard <commit hash>

## «Откатить» изменения, которые не попали ни в staging, ни в коммит

git restore <file>

## Проверка изменений между версиями

git diff

красный цвет строки (-) значит, что эта строка была удалена;

зелёный цвет строки (+) значит, что она была добавлена.

По умолчанию команда git diff  показывает изменения только в modified. Чтобы просмотреть изменения в staged, нужно использовать флаг --staged

## Дописываем строку в файл

$ cat file.txt

Первая строка файла

$ echo "Вторая строка файла" >> file.txt

$ cat file.txt

Первая строка файла

Вторая строка файла 

Одинарный символ > тоже перенаправит вывод команды в файл, но перед этим сотрёт содержимое файла, то есть перезапишет файл целиком.

## Игнорирование файлов в Git
.gitignore

Правила из .gitignore применяются только к новым (untracked) файлам. Если файл уже попал в staging area или в коммит, то правила на него не распространяются.

"#" - Комментарий

Просто название файла

"*" - любой файл

игнорировать все файлы, которые заканчиваются на .jpeg - 
*.jpeg

игнорировать все файлы "tmp" во всех подпапках папки docs - 
docs/*/tmp 

? - любой символ

file?.txt - будут проигнорированы файлы fileA.txt и file1.txt

Квадратные скобки ([…]) соответствуют одному символу из списка, который указан в скобках.

file[0-2].txt 

/ до слова - игнорировать файл в корневой папке, после слова - игнорировать папку

** может соответствовать любому количеству вложенных папок (в том числе нулю).

игнорировать файлы "docs/current/tmp", "docs/old/tmp",
а также "docs/old/saved/a/b/c/d/tmp"
и даже "docs/tmp", потому что ноль вложенных папок тоже подходит: 
docs/**/tmp

! - инверсия правила. Добавление исключений

Если всё же нужно отобразить все игнорируемые файлы, то это можно сделать с помощью ключа --ignored: git status --ignored. В таком случае в выводе git status появится раздел Ignored files.